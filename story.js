// ===== ä½›å…‰å°‹å…‰è¨˜ï¼šä¸‰å¥½ä¹‹æ—… AI äº’å‹•ç‰ˆ =====
// æ•…äº‹è³‡æ–™æª”æ¡ˆ

const STORY_DATA = {
    // ===== åºç«  =====
    prologue: {
        p1: {
            id: 'p1',
            background: 'images/é«”è‚²é¤¨.png',
            characters: {
                center: 'images/æ˜Ÿé›²å¤§å¸«.png'
            },
            speaker: 'æ˜Ÿé›²å¤§å¸«ä½¿è€…',
            text: 'å­©å­ï¼Œäººç”Ÿçš„è·¯é€”ï¼Œå”¯æœ‰å¿ƒå­˜å–„å¿µï¼Œå£åèŠ¬èŠ³ï¼Œèº«è¡Œå¥½äº‹ï¼Œæ–¹èƒ½åœ“æ»¿ã€‚',
            audio: 'music/äººè²/æ˜Ÿé›²å¤§å¸«ä½¿è€…/P1.MP3',
            next: 'p2'
        },
        p2: {
            id: 'p2',
            background: 'images/é«”è‚²é¤¨.png',
            characters: {
                left: 'images/æ˜Ÿé›²å¤§å¸«.png',
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæ‰çœ¼ç›ï¼‰å‰›å‰›...æ˜¯åœ¨åšå¤¢å—Žï¼Ÿå°ä¸Šå¥½åƒæœ‰ä¸€é“é‡‘å…‰...',
            audio: 'music/äººè²/çŽ©å®¶/G1.MP3',
            next: 'p3'
        },
        p3: {
            id: 'p3',
            background: 'images/é«”è‚²é¤¨.png',
            characters: {
                center: 'images/æ˜Ÿé›²å¤§å¸«.png'
            },
            speaker: 'æ˜Ÿé›²å¤§å¸«ä½¿è€…',
            text: 'é€™ä¸æ˜¯å¤¢ã€‚æˆ‘äº¤çµ¦ä½ ä¸€å¡ŠçŸ³æ¿ï¼Œä½ éœ€è¦åœ¨å¤§å­¸å››å¹´ä¸­ï¼Œæ‰¾å›žã€Œä¸‰å¥½ä¹‹çŸ³ã€ã€‚',
            audio: 'music/äººè²/æ˜Ÿé›²å¤§å¸«ä½¿è€…/P2.MP3',
            next: 'p4'
        },
        p4: {
            id: 'p4',
            background: 'images/é«”è‚²é¤¨.png',
            characters: {
                center: 'images/æ˜Ÿé›²å¤§å¸«.png'
            },
            speaker: 'æ˜Ÿé›²å¤§å¸«ä½¿è€…',
            text: 'åªæœ‰çœŸæ­£å¯¦è¸ã€Œåšå¥½äº‹ã€èªªå¥½è©±ã€å­˜å¥½å¿ƒã€ï¼Œæ‰èƒ½é»žäº®æ¯ä¸€é¡†å¯¶çŸ³ã€‚åŽ»å§ï¼Œç”¨ä½ çš„è¡Œå‹•è­‰æ˜Žè‡ªå·±ã€‚',
            audio: 'music/äººè²/æ˜Ÿé›²å¤§å¸«ä½¿è€…/P3.MP3',
            next: 'p5'
        },
        p5: {
            id: 'p5',
            background: 'images/é«”è‚²é¤¨.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæ¡è‘—çŸ³æ¿ï¼‰å¥½ç¥žå¥‡...æˆ‘ä¸€å®šè¦æ‰¾åˆ°é€™ä¸‰é¡†å¯¶çŸ³ï¼',
            audio: 'music/äººè²/çŽ©å®¶/G2.MP3',
            nextChapter: 'chapter1',
            nextNode: 'c1_1'
        }
    },

    // ===== ç¬¬ä¸€ç« ï¼šå¤§ä¸€ - åšå¥½äº‹ =====
    chapter1: {
        c1_1: {
            id: 'c1_1',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/ç¡è‘—å¥³å¤§ç”Ÿ.png'
            },
            speaker: 'æ—ç™½',
            text: 'å¤§ä¸€çš„ç”Ÿæ´»è®“ä½ å¿™å¾—ç„¦é ­çˆ›é¡ã€‚é€™å¤©ä¸‹åˆï¼Œä½ ç´¯å€’åœ¨æ•™å®¤ç¡è‘—äº†...',
            next: 'c1_2'
        },
        c1_2: {
            id: 'c1_2',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png',
                
            },
            speaker: 'åŒå­¸',
            text: 'æˆ‘çš„ AirPods Pro ä¸è¦‹äº†ï¼é‚£æ˜¯æˆ‘æœ‹å‹é€çš„ç•¢æ¥­ç¦®ç‰©å•Šï¼æ€Žéº¼è¾¦ï¼Ÿ',
            audio: 'music/äººè²/è€³æ©Ÿå¥³/A1.MP3',
            next: 'c1_3'
        },
        c1_3: {
            id: 'c1_3',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png'
            },
            speaker: 'åŒå­¸',
            text: 'ï¼ˆæ€¥å¾—å¿«å“­äº†ï¼‰å‰›å‰›é‚„åœ¨çš„...ä¸€å®šæ˜¯æŽ‰åœ¨æ•™å®¤è£¡äº†ï¼',
            audio: 'music/äººè²/è€³æ©Ÿå¥³/A2.MP3',
            next: 'c1_ai'
        },
        c1_ai: {
            id: 'c1_ai',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                
            },
            speaker: 'æ—ç™½',
            text: 'é€™æ˜¯ä½ å±•ç¾ã€Œåšå¥½äº‹ã€çš„æ™‚åˆ»ã€‚ä½ æœƒæ€Žéº¼åšï¼Ÿ',
            aiChallenge: {
                prompt: 'æƒ…å¢ƒï¼šåŒå­¸æ‰¾ä¸åˆ° AirPods Pro å¾ˆè‘—æ€¥ã€‚è«‹è¼¸å…¥ä½ çš„ã€Œè¡Œå‹•ã€ï¼Œå±•ç¾ã€Œåšå¥½äº‹ã€çš„ç²¾ç¥žã€‚',
                hint: 'æç¤ºï¼šè«‹å…·é«”æè¿°ä½ çš„è¡Œå‹•ã€‚ä¾‹å¦‚ï¼šã€Œæˆ‘å¹«ä½ æ‰¾ã€ã€ã€Œæˆ‘å€‘ä¸€èµ·æ‰¾åžƒåœ¾æ¡¶ã€ã€ã€Œæˆ‘åŽ»çœ‹çœ‹åœ°æ¿ã€ã€ã€Œåˆ¥æ€¥ï¼Œæˆ‘é™ªä½ æ‰¾ã€ã€‚',
                context: 'å¤§ä¸€æ–°ç”Ÿåœ¨æ•™å®¤è£¡ç¡è‘—å¾Œé†’ä¾†ï¼Œç™¼ç¾åŒå­¸çš„ AirPods Pro ä¸è¦‹äº†ï¼ŒåŒå­¸å¾ˆè‘—æ€¥ã€‚é€™æ˜¯å±•ç¾ã€Œèº«-åšå¥½äº‹ã€çš„æ©Ÿæœƒã€‚',
                gemType: 'good_deed',
                validation: {
                    positivePatterns: [
                        /(å¹«|å”åŠ©|é™ª|ä¸€èµ·).*(æ‰¾|çœ‹|å°‹)/,
                        /(åŽ»|æª¢æŸ¥|ç¿»).*(åžƒåœ¾æ¡¶|åœ°æ¿|è§’è½|æ¡Œ|æŠ½å±œ)/,
                        /(åˆ¥æ€¥|å†·éœ).*(å¹«|æ‰¾)/,
                        /(æˆ‘å€‘|å’±å€‘).*(ä¸€èµ·|åˆä½œ)/
                    ],
                    negativePatterns: [
                        /(ä¸|æ²’ç©º|æ‡¶|è‡ªå·±).*(å¹«|æ‰¾|ç®¡)/,
                        /(å¥½ç¬‘|æ´»è©²|ç™½ç—´|ç¬¨)/,
                        /(ç„¡è¦–|èµ°é–‹|é›¢é–‹)/,
                        /(å†è²·|ç®—äº†)/
                    ]
                }
            },
            aiSuccess: 'c1_success_1',
            aiFail: 'c1_ai'
        },
        c1_success_1: {
            id: 'c1_success_1',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæ”¾ä¸‹èƒŒåŒ…ï¼Œé–‹å§‹èªçœŸæœå°‹ï¼‰è®“æˆ‘ä¾†å¹«ä½ æ‰¾æ‰¾çœ‹ï¼',
            audio: 'music/äººè²/çŽ©å®¶/G3.MP3',
            next: 'c1_success_2'
        },
        c1_success_2: {
            id: 'c1_success_2',
            background: 'images/æ•™å®¤.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/éºå¤±çš„è€³æ©Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆåœ¨åžƒåœ¾æ¡¶æ—é‚Šæ‰¾åˆ°äº†ï¼‰æ‰¾åˆ°äº†ï¼åœ¨é€™è£¡ï¼',
            audio: 'music/äººè²/çŽ©å®¶/G4.MP3',
            next: 'c1_success_3'
        },
        c1_success_3: {
            id: 'c1_success_3',
            background: 'images/æ•™å®¤.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png'
            },
            speaker: 'åŒå­¸',
            text: 'å¤ªæ„Ÿè¬ä½ äº†ï¼ä½ çœŸæ˜¯å¥½äººï¼æˆ‘ä»¥å¾Œä¸€å®šæœƒè¨˜å¾—ä½ çš„æ©æƒ…ï¼',
            audio: 'music/äººè²/è€³æ©Ÿå¥³/A3.MP3',
            next: 'c1_success_4'
        },
        c1_success_4: {
            id: 'c1_success_4',
            background: 'images/æ•™å®¤.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'æ—ç™½',
            text: 'ä¸€é“ç¶ å…‰å¾žçŸ³æ¿ä¸­é–ƒç¾...ä½ ç²å¾—äº†ã€å–„è¡Œä¹‹çŸ³ã€‘ï¼åŽŸä¾†ï¼Œå¥½äº‹å°±æ˜¯ç´”ç²¹çš„ä¼¸å‡ºæ´æ‰‹ã€‚',
            gem: 'good_deed',
            nextChapter: 'chapter2',
            nextNode: 'c2_1'
        }
    },

    // ===== ç¬¬äºŒç« ï¼šå¤§äºŒ - èªªå¥½è©± =====
    chapter2: {
        c2_1: {
            id: 'c2_1',
            background: 'images/èµ°å»Šçš„ç›¡é ­æ˜¯èª²å¤–çµ„.png',
            characters: {
                center: 'images/å¥³å¤§ç”Ÿæ‹¿è‘—è³‡æ–™.png'
            },
            speaker: 'æ—ç™½',
            text: 'å¤§äºŒäº†ï¼Œç‚ºäº†ç¤¾åœ˜æ´»å‹•ä½ å¿™è‘—è·‘è¡Œæ”¿æµç¨‹ã€‚ä»Šå¤©ä½ è¦æŠŠä¼åŠƒæ›¸é€åˆ°èª²å¤–æ´»å‹•çµ„ã€‚',
            next: 'c2_2'
        },
        c2_2: {
            id: 'c2_2',
            background: 'images/èµ°å»Šçš„ç›¡é ­æ˜¯èª²å¤–çµ„.png',
            characters: {
                left: 'images/å¥³å¤§ç”Ÿæ‹¿è‘—è³‡æ–™.png',
                right: 'images/ç†±å¿ƒçš„å­¸é•·.png'
            },
            speaker: 'å­¸é•·',
            text: 'èª²å¤–æ´»å‹•çµ„å°±åœ¨èµ°å»Šç›¡é ­ã€‚è¨˜å¾—è¦æœ‰ç¦®è²Œå–”ï¼Œå¸«é•·å€‘å¾ˆé‡è¦–é€™å€‹ã€‚',
            audio: 'music/äººè²/å­¸é•·.MP3',
            next: 'c2_3'
        },
        c2_3: {
            id: 'c2_3',
            background: 'images/èª²å¤–æ´»å‹•çµ„.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæ·±å¸ä¸€å£æ°£ï¼‰å¥½ï¼Œæˆ‘æº–å‚™å¥½äº†ã€‚é€™æ˜¯å±•ç¾ã€Œèªªå¥½è©±ã€çš„æ™‚åˆ»ï¼',
            audio: 'music/äººè²/çŽ©å®¶/G5.MP3',
            next: 'c2_ai'
        },
        c2_ai: {
            id: 'c2_ai',
            background: 'images/èª²å¤–æ´»å‹•çµ„.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/èª²å¤–å“¥å“¥å§å§.png'
            },
            speaker: 'æ—ç™½',
            text: 'ä½ èµ°é€²èª²å¤–æ´»å‹•çµ„è¾¦å…¬å®¤ã€‚ä½ æœƒæ€Žéº¼èªªï¼Ÿ',
            aiChallenge: {
                prompt: 'æƒ…å¢ƒï¼šä½ è¦ç¹³äº¤ä¼åŠƒæ›¸çµ¦å¸«é•·ã€‚è«‹è¼¸å…¥ä½ çš„ã€Œè©±èªžã€ï¼Œå±•ç¾ã€Œèªªå¥½è©±ã€çš„ç¦®è²Œèˆ‡æ™ºæ…§ã€‚',
                hint: 'æç¤ºï¼šé€²å…¥è¾¦å…¬å®¤çš„åŸºæœ¬ç¦®å„€æ˜¯ä»€éº¼ï¼Ÿå•å€™å°è±¡ï¼ˆè€å¸«/å“¥å“¥å§å§ï¼‰+ ç›®çš„ï¼ˆäº¤ä¼åŠƒï¼‰+ ç¦®è²Œçµèªžï¼ˆè¬è¬/è¾›è‹¦ï¼‰ã€‚',
                context: 'å¤§äºŒå­¸ç”Ÿè¦åˆ°èª²å¤–æ´»å‹•çµ„ç¹³äº¤ç¤¾åœ˜ä¼åŠƒæ›¸ã€‚é€™æ˜¯å±•ç¾ã€Œå£-èªªå¥½è©±ã€çš„æ©Ÿæœƒã€‚',
                gemType: 'good_word',
                validation: {
                    positivePatterns: [
                        /(è€å¸«|å­¸é•·|å§|å“¥|ä¸»ä»»).*(å¥½|æ‚¨å¥½)/,
                        /(è«‹å•|éº»ç…©|ä¸å¥½æ„æ€|æ‰“æ“¾).*(äº¤|çµ¦).*(ä¼åŠƒ|è³‡æ–™)/,
                        /(è¬è¬|è¾›è‹¦).*(è€å¸«|æ‚¨)/,
                        /(äº¤|çµ¦).*(è€å¸«|å“¥å“¥|å§å§)/
                    ],
                    negativePatterns: [
                        /(å–‚|æ¬¸|é‚£å€‹).*(åœ¨å“ª|æ”¶ä¸‹)/,
                        /(å¿«|éš¨ä¾¿|ä¸Ÿ).*(æ”¶|æ‹¿)/,
                        /(ä¸çŸ¥é“|ç…©)/,
                        /^(ä¼åŠƒ|è³‡æ–™)/
                    ]
                }
            },
            aiSuccess: 'c2_success_1',
            aiFail: 'c2_ai'
        },
        c2_success_1: {
            id: 'c2_success_1',
            background: 'images/èª²å¤–æ´»å‹•çµ„.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/èª²å¤–å“¥å“¥å§å§.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæœ‰ç¦®è²Œåœ°å•å€™ä¸¦èªªæ˜Žä¾†æ„ï¼‰',
            next: 'c2_success_2'
        },
        c2_success_2: {
            id: 'c2_success_2',
            background: 'images/èª²å¤–æ´»å‹•çµ„.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/èª²å¤–å“¥å“¥å§å§.png'
            },
            speaker: 'å¸«é•·',
            text: 'ï¼ˆè¦ªåˆ‡åœ°å¾®ç¬‘ï¼‰ä½ çœŸæœ‰ç¦®è²Œï¼ä¼åŠƒæ›¸æˆ‘æ”¶ä¸‹äº†ï¼Œç¥ä½ å€‘æ´»å‹•é †åˆ©ã€‚',
            audio: 'music/äººè²/å¸«é•·.MP3',
            next: 'c2_success_3'
        },
        c2_success_3: {
            id: 'c2_success_3',
            background: 'images/èª²å¤–æ´»å‹•çµ„.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'æ—ç™½',
            text: 'ä¸€é“è—å…‰å¾žçŸ³æ¿ä¸­ç¶»æ”¾...ä½ ç²å¾—äº†ã€æ…§èªžä¹‹çŸ³ã€‘ï¼åŽŸä¾†ï¼Œèªžè¨€çš„å°Šé‡èƒ½å»ºç«‹æº«æš–çš„é€£çµã€‚',
            gem: 'good_word',
            nextChapter: 'chapter3',
            nextNode: 'c3_1'
        }
    },

    // ===== ç¬¬ä¸‰ç« ï¼šå¤§å›› - å­˜å¥½å¿ƒ =====
    chapter3: {
        c3_1: {
            id: 'c3_1',
            background: 'images/å¤§å®¶éƒ½å†å¾€å‰èµ°_æˆ‘å¥½åƒå°‘äº†ç”šéº¼.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆçœ‹è‘—çŸ³æ¿ï¼‰æ˜Žæ˜Žåšäº†å¥½äº‹ã€èªªäº†å¥½è©±ï¼Œç‚ºä»€éº¼é‚„æ˜¯æ²’æ‹¿åˆ°æœ€å¾Œä¸€é¡†çŸ³é ­ï¼Ÿ',
            audio: 'music/äººè²/çŽ©å®¶/G6.MP3',
            next: 'c3_2'
        },
        c3_2: {
            id: 'c3_2',
            background: 'images/å¤§å®¶éƒ½å†å¾€å‰èµ°_æˆ‘å¥½åƒå°‘äº†ç”šéº¼.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'é›£é“æ˜¯å› ç‚ºæˆ‘å¹³å¸¸æ„›è¬›åœ°ç„æ¢—ï¼Ÿé‚„æ˜¯æˆ‘å¤ªåŠŸåˆ©äº†ï¼Ÿ',
            audio: 'music/äººè²/çŽ©å®¶/G7.MP3',
            next: 'c3_3'
        },
        c3_3: {
            id: 'c3_3',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png'
            },
            speaker: 'åŒå­¸',
            text: 'ï¼ˆè·‘éŽä¾†ï¼‰å˜¿ï¼é‚„è¨˜å¾—æˆ‘å—Žï¼Ÿå¤§ä¸€ä½ å¹«æˆ‘æ‰¾è€³æ©Ÿçš„æ™‚å€™ï¼Œæˆ‘å°±è¦ºå¾—ä½ å¿ƒåœ°å¾ˆå¥½ã€‚',
            audio: 'music/äººè²/è€³æ©Ÿå¥³/A4.MP3',
            next: 'c3_4'
        },
        c3_4: {
            id: 'c3_4',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png'
            },
            speaker: 'åŒå­¸',
            text: 'é›–ç„¶ä½ å¹³å¸¸æ„›é–‹çŽ©ç¬‘ï¼Œä½†æˆ‘çŸ¥é“ä½ å…§å¿ƒå…¶å¯¦å¾ˆæº«æŸ”ã€‚ä»Šå¤©æ˜¯æˆ‘å€‘ç•¢æ¥­çš„æ—¥å­ï¼ŒçœŸæƒ³å¥½å¥½è¬è¬ä½ ï¼',
            audio: 'music/äººè²/è€³æ©Ÿå¥³/A5.MP3',
            next: 'c3_ai'
        },
        c3_ai: {
            id: 'c3_ai',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/å¥³å¤§ç”Ÿå¤§å–Š.png'
            },
            speaker: 'æ—ç™½',
            text: 'é€™æ˜¯ä½ å±•ç¾ã€Œå­˜å¥½å¿ƒã€çš„æ™‚åˆ»ã€‚ä½ æœƒæ€Žéº¼å›žæ‡‰ï¼Ÿ',
            aiChallenge: {
                prompt: 'æƒ…å¢ƒï¼šæ›¾ç¶“å—ä½ å¹«åŠ©çš„åŒå­¸ä¾†é“è¬ã€‚è«‹è¼¸å…¥ä½ çš„ã€Œå…§å¿ƒæƒ³æ³•ã€æˆ–ã€Œç¥ç¦ã€ï¼Œå±•ç¾ã€Œå­˜å¥½å¿ƒã€çš„çœŸèª ã€‚',
                hint: 'æç¤ºï¼šé€™æ˜¯ä¸€å€‹æ„Ÿå‹•çš„æ™‚åˆ»ã€‚è«‹è¼¸å…¥ã€Œç¥ç¦ã€ã€ã€Œæ„Ÿè¬ç·£åˆ†ã€ã€ã€Œæ­å–œç•¢æ¥­ã€æˆ–ã€Œå¸Œæœ›ä½ æœªä¾†é †åˆ©ã€ç­‰è©±èªžã€‚',
                context: 'ç•¢æ¥­å…¸ç¦®ç•¶å¤©ï¼Œå¤§ä¸€æ™‚å—éŽä½ å¹«åŠ©çš„åŒå­¸ä¾†é“è¬ï¼Œç¨±è®šä½ å…§å¿ƒæº«æŸ”ã€‚é€™æ˜¯å±•ç¾ã€Œæ„-å­˜å¥½å¿ƒã€çš„æ©Ÿæœƒã€‚',
                gemType: 'good_heart',
                validation: {
                    positivePatterns: [
                        /(ç¥|é¡˜|å¸Œæœ›).*(å¿«æ¨‚|é †åˆ©|æœªä¾†|å‰ç¨‹|å¥½é‹)/,
                        /(æ­å–œ).*(ç•¢æ¥­)/,
                        /(è¬è¬|æ„Ÿè¬).*(ç·£åˆ†|é‡è¦‹|æœ‹å‹)/,
                        /(ä¸ç”¨è¬|å°äº‹|æ²’é—œä¿‚).*(é–‹å¿ƒ|å¥½)/,
                        /(ä¸€èµ·|æˆ‘å€‘).*(åŠ æ²¹|åŠªåŠ›)/
                    ],
                    negativePatterns: [
                        /(é‚„æˆ‘|éŒ¢|å›žå ±)/,
                        /(çµ‚æ–¼|æ»¾|å†è¦‹|ä¸é€)/,
                        /(åœ°ç„|æ¢—|ç¬‘æ­»)/,
                        /(ç®—äº†|éš¨ä¾¿)/
                    ]
                }
            },
            aiSuccess: 'c3_success_1',
            aiFail: 'c3_ai'
        },
        c3_success_1: {
            id: 'c3_success_1',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                left: 'images/ç”·å¤§å­¸ç”Ÿ.png',
                right: 'images/é¢å¸¶å¾®ç¬‘çš„ä¸€å€‹åŒå­¸.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆçœŸèª åœ°å›žæ‡‰ï¼‰',
            next: 'c3_success_2'
        },
        c3_success_2: {
            id: 'c3_success_2',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæç„¶å¤§æ‚Ÿï¼‰åŽŸä¾†...å­˜å¥½å¿ƒä¸æ˜¯åˆ»æ„çš„ä»»å‹™ï¼Œè€Œæ˜¯ç™¼è‡ªå…§å¿ƒçš„ç¥ç¦ï¼',
            audio: 'music/äººè²/çŽ©å®¶/G8.MP3',
            next: 'c3_success_3'
        },
        c3_success_3: {
            id: 'c3_success_3',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'æ—ç™½',
            text: 'é‡‘è‰²çš„å…‰èŠ’å¾žçŸ³æ¿ä¸­æ¹§ç¾...ä½ ç²å¾—äº†ã€æ·¨å¿µä¹‹çŸ³ã€‘ï¼ä¸‰é¡†å¯¶çŸ³çµ‚æ–¼é›†é½Šäº†ï¼',
            gem: 'good_heart',
            nextChapter: 'ending',
            nextNode: 'e1'
        }
    },

    // ===== çµå±€ =====
    ending: {
        e1: {
            id: 'e1',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/æ˜Ÿé›²å¤§å¸«.png'
            },
            speaker: 'æ˜Ÿé›²å¤§å¸«ä½¿è€…',
            text: 'ï¼ˆè²éŸ³å†æ¬¡éŸ¿èµ·ï¼‰ä½ å¾žè¿·æƒ˜åˆ°è¦ºæ‚Ÿï¼Œå·²å°‡ã€Œä¸‰å¥½ã€èžå…¥ç”Ÿå‘½ã€‚',
            audio: 'music/äººè²/æ˜Ÿé›²å¤§å¸«ä½¿è€…/P4.MP3',
            backgroundMusic: 'music/æ ¡åœ’è¼•éŸ³æ¨‚.mp3',  // çµå±€èƒŒæ™¯éŸ³æ¨‚
            next: 'e2'
        },
        e2: {
            id: 'e2',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/æ˜Ÿé›²å¤§å¸«.png'
            },
            speaker: 'æ˜Ÿé›²å¤§å¸«ä½¿è€…',
            text: 'é€™ä¸‰é¡†å¯¶çŸ³ä¸æ˜¯ç›®æ¨™ï¼Œè€Œæ˜¯ä½ ä¿®è¡Œçš„è¦‹è­‰ã€‚çœŸæ­£çš„å¯¶è—ï¼Œåœ¨ä½ å¿ƒä¸­ã€‚',
            audio: 'music/äººè²/æ˜Ÿé›²å¤§å¸«ä½¿è€…/P5.MP3',
            next: 'e3'
        },
        e3: {
            id: 'e3',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'ä½ ',
            text: 'ï¼ˆæ¡è‘—ç™¼å…‰çš„çŸ³æ¿ï¼‰è¬è¬æ‚¨ï¼Œå¤§å¸«ã€‚æˆ‘æ˜Žç™½äº†ï¼Œä¸‰å¥½ä¸æ˜¯ä»»å‹™ï¼Œè€Œæ˜¯ç”Ÿæ´»çš„ä¸€éƒ¨åˆ†ã€‚',
            audio: 'music/äººè²/çŽ©å®¶/G9.MP3',
            next: 'e4'
        },
        e4: {
            id: 'e4',
            background: 'images/ä¸€èµ·ç•¢æ¥­.png',
            characters: {
                center: 'images/ç”·å¤§å­¸ç”Ÿ.png'
            },
            speaker: 'æ—ç™½',
            text: 'â€” å°‹å…‰ä¹‹æ—… å®Œ â€”\n\næ„Ÿè¬éŠçŽ©ã€Œä½›å…‰å°‹å…‰è¨˜ï¼šä¸‰å¥½ä¹‹æ—… AI äº’å‹•ç‰ˆã€\n\nä½œè€…ï¼šè¨±å½§éŠ˜ã€è¨±æ…§æŸ”\nAI æ•´åˆç‰ˆæœ¬ï¼š2025/11/28',
            choices: [
    {
        text: 'ðŸ  å›žåˆ°æ¨™é¡Œç•«é¢',
        type: 'neutral',
        next: null,
        action: () => game.returnToTitle()
    }
]
        }
    }
};